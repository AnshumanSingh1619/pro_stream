<style>
  .modal-backdrop {
  background-color: blue; 
}

.contain {
  margin: auto;
  top: 100%;
  width: 100%;
  color: black;
  border-radius: 5px;
  box-shadow: 0px 0px 2px 2px red;
}

.video-player {
  width: 90%;
  position: absolute;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  display: none;
}

.video:focus {
  outline: none;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
}
</style>
<h2><%= @content.name %></h2>
<div class="col-lg-12">
  <div class="row">
    <div class="col-lg-10 mt-0">
      <div>
        <% if @content.trailer.present? %>
          <video id="my-player" width="100%" height="840" controls autoplay muted controlsList="nodownload">
            <source src="<%= @content.trailer %>" type="video/mp4">
          </video>
        <% end %>
      </div>
    </div>
    <div class="col-lg-2">
      <div class="container">
        <div class="container">
          <div class="overflow-auto conta mt-4" style="max-height: 875px;">
            <div class="container mt-3">
              <div>
                <%= link_to "Season #{@season.season_no}", root_path, class: "btn btn-outline-dark btn-lg mb-2 bi bi-caret-down",
                data: { bs_toggle: "modal", bs_target: "#newseasonModal", remote: true} %>
              </div> 
              <% if user_signed_in? %>
                <% if mylisth.present? %>
                  <%= button_to "Remove from list", remove_from_list_path(@content.id), method: :delete, class: "text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900", style: "width: 100%" %>
                <% else %>
                  <%= button_to "Add to list", add_to_list_path(@content.id), method: :post, class: "text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900", style: "width: 100%" %>
                <% end %>
              <% end %>  
              <% episodes = @season.episodes %>
              <% episodes.sort_by(&:episode_no) %>
              <% episodes.each do |episode| %>
                <div width="100%" height="30px" >
                  <p><%= "S#{@season.season_no}" %> <%= "Ep #{episode.episode_no}" %></p>
                  <button type="button" class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900" onclick="playVideo('<%= episode.episode %>')">Play</button>
                </div>
              <% end %>
            </div>
          </div>
        </div>  
      </div>  
    </div>
  </div>
  <%= @content.description %> 
  <br>
  <% @content.type_of_content.each do |content_type| %>
    <%= "#{content_type}" %>
    <br>
  <% end %>
  <% @content.languages.each do |l| %>
    <%= "#{l}" %>
    <br>
  <% end %>
  <p>
    <strong>Actor:</strong>
    <%= @content.actor %>
  </p>
</div>

<div class="video-player" id="videoPlayer">
  <video width="100%" controls controlsList="nodownload" id="myVideo">
    <source src="" type="video/mp4">
  </video>
  <svg class="w-6 h-6 text-gray-800 dark:text-white close-btn cursor-pointer" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/>
  </svg>
<div>

<% if admin_signed_in? %>
  <%= link_to "Edit this content", edit_content_path(@content) %> |
<% end %>  


<script>
  document.querySelector('.close-btn').addEventListener('click', stopVideo);
  var videoPlayer = document.getElementById("videoPlayer");
  var myVideo = document.getElementById("myVideo");
  var trailerVideo = document.getElementById("my-player"); 
  
  function stopVideo() {
    videoPlayer.style.display = "none";
    myVideo.pause(); 
    trailerVideo.pause();
  }  
  
  function playVideo(file) {
    myVideo.src = file;
    videoPlayer.style.display = "block";
    myVideo.play();
    trailerVideo.pause(); 
  } 
</script>










